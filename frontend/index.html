<!-- frontend/index.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Семейный бюджет Pro</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Chart.js для графиков -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- JsBarcode для штрихкодов -->
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    
    <!-- QRCode для QR-кодов -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    
    <style>
        /* Стили для Lucide иконок */
        .nav-icon svg,
        .card-icon svg {
            width: 20px;
            height: 20px;
            stroke-width: 2;
        }
        
        .mobile-nav-item .nav-icon svg {
            width: 22px;
            height: 22px;
        }
    </style>
</head>
<body>
    <div class="app" id="app">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">B</div>
                    <div class="logo-text">
                        <span class="logo-title">Budget</span>
                        <span class="logo-subtitle">Professional</span>
                    </div>
                </div>
                <button class="sidebar-close" id="sidebarClose">
                    <i data-lucide="x"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Основное</div>
                    <a href="#" class="nav-item active" data-tab="dashboard">
                        <span class="nav-icon"><i data-lucide="layout-dashboard"></i></span>
                        <span class="nav-text">Дашборд</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="transactions">
                        <span class="nav-icon"><i data-lucide="receipt"></i></span>
                        <span class="nav-text">Операции</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="accounts">
                        <span class="nav-icon"><i data-lucide="wallet"></i></span>
                        <span class="nav-text">Счета</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="categories">
                        <span class="nav-icon"><i data-lucide="tags"></i></span>
                        <span class="nav-text">Категории</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Кредиты</div>
                    <a href="#" class="nav-item" data-tab="credit-cards">
                        <span class="nav-icon"><i data-lucide="credit-card"></i></span>
                        <span class="nav-text">Кредитные карты</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="credits">
                        <span class="nav-icon"><i data-lucide="file-text"></i></span>
                        <span class="nav-text">Кредиты</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="mortgages">
                        <span class="nav-icon"><i data-lucide="home"></i></span>
                        <span class="nav-text">Ипотека</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="calculator">
                        <span class="nav-icon"><i data-lucide="calculator"></i></span>
                        <span class="nav-text">Калькулятор</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Планирование</div>
                    <a href="#" class="nav-item" data-tab="goals">
                        <span class="nav-icon"><i data-lucide="target"></i></span>
                        <span class="nav-text">Цели</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="investments">
                        <span class="nav-icon"><i data-lucide="trending-up"></i></span>
                        <span class="nav-text">Инвестиции</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="taxes">
                        <span class="nav-icon"><i data-lucide="landmark"></i></span>
                        <span class="nav-text">Налоги</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Аналитика</div>
                    <a href="#" class="nav-item" data-tab="analytics">
                        <span class="nav-icon"><i data-lucide="bar-chart-3"></i></span>
                        <span class="nav-text">Статистика</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="prices">
                        <span class="nav-icon"><i data-lucide="store"></i></span>
                        <span class="nav-text">Сравнение цен</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="bonus-cards">
                        <span class="nav-icon"><i data-lucide="ticket"></i></span>
                        <span class="nav-text">Бонусные карты</span>
                    </a>
                    <a href="#" class="nav-item" data-tab="achievements">
                        <span class="nav-icon"><i data-lucide="trophy"></i></span>
                        <span class="nav-text">Достижения</span>
                    </a>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">F</div>
                    <div class="user-details">
                        <div class="user-name">Семья</div>
                        <div class="user-status">Premium</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <header class="header">
                <button class="menu-btn" id="menuBtn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <h1 class="page-title" id="pageTitle">Дашборд</h1>
                <div class="header-actions">
                    <button class="btn btn-icon" id="refreshBtn" title="Обновить">
                        <i data-lucide="refresh-cw"></i>
                    </button>
                    <button class="btn btn-primary" id="addBtn">
                        <i data-lucide="plus"></i>
                        <span class="btn-text">Добавить</span>
                    </button>
                </div>
            </header>

            <div class="content" id="content">
                <!-- Dashboard -->
                <section class="tab-content active" id="dashboard-tab">
                    <!-- AI Tips -->
                    <div class="ai-tips-container" id="aiTipsContainer" style="display: none; margin-bottom: 20px;"></div>
                    
                    <div class="dashboard-grid">
                        <!-- Баланс -->
                        <div class="card card-balance">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="wallet"></i></div>
                                <span class="card-title">Общий баланс</span>
                            </div>
                            <div class="card-value" id="totalBalance">0 ₽</div>
                            <div class="card-subtitle">
                                <span>Чистый капитал: </span>
                                <span id="netWorth">0 ₽</span>
                            </div>
                            <div class="balance-details">
                                <div class="balance-detail-row">
                                    <span>Резерв на налоги:</span>
                                    <span id="taxReserveBalance">0 ₽</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Доходы -->
                        <div class="card card-income">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="trending-up"></i></div>
                                <span class="card-title">Доходы</span>
                            </div>
                            <div class="card-value" id="monthlyIncome">0 ₽</div>
                            <div class="card-change positive" id="incomeChange">
                                <span>+0%</span>
                                <span>vs прошлый месяц</span>
                            </div>
                        </div>
                        
                        <!-- Расходы -->
                        <div class="card card-expense">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="trending-down"></i></div>
                                <span class="card-title">Расходы</span>
                            </div>
                            <div class="card-value" id="monthlyExpense">0 ₽</div>
                            <div class="card-change negative" id="expenseChange">
                                <span>+0%</span>
                                <span>vs прошлый месяц</span>
                            </div>
                            <div class="expense-breakdown">
                                <div class="breakdown-row">
                                    <span>Семейные:</span>
                                    <span id="expensePersonal">0 ₽</span>
                                </div>
                                <div class="breakdown-row">
                                    <span>Бизнес:</span>
                                    <span id="expenseBusiness">0 ₽</span>
                                </div>
                                <div class="breakdown-row">
                                    <span>Платёж кредиток:</span>
                                    <span id="creditCardPayments">0 ₽</span>
                                </div>
                                <div class="breakdown-row">
                                    <span>Платёж кредитов:</span>
                                    <span id="creditPayments">0 ₽</span>
                                </div>
                                <div class="breakdown-row">
                                    <span>Платёж ипотеки:</span>
                                    <span id="mortgagePayments">0 ₽</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Накоплено -->
                        <div class="card card-savings">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="piggy-bank"></i></div>
                                <span class="card-title">Накоплено</span>
                            </div>
                            <div class="card-value" id="monthlySavings">0 ₽</div>
                            <div class="card-subtitle">
                                <span>Норма: </span>
                                <span id="savingsRate">0%</span>
                            </div>
                        </div>
                        
                        <!-- Ближайшие платежи -->
                        <div class="card card-wide">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="clock"></i></div>
                                <span class="card-title">Ближайшие платежи</span>
                            </div>
                            <div class="upcoming-list" id="upcomingPayments">
                                <div class="empty-state small">Нет предстоящих платежей</div>
                            </div>
                        </div>
                        
                        <!-- Превышение бюджета -->
                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="alert-triangle"></i></div>
                                <span class="card-title">Превышение бюджета</span>
                            </div>
                            <div class="over-budget-list" id="overBudgetList">
                                <div class="empty-state small">Всё под контролем</div>
                            </div>
                        </div>
                        
                        <!-- Тренды -->
                        <div class="card card-wide">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="bar-chart-3"></i></div>
                                <span class="card-title">Тренды за 6 месяцев</span>
                            </div>
                            <div class="chart-container" id="trendsChart" style="height: 200px;"></div>
                        </div>
                        
                        <!-- Цели -->
                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="target"></i></div>
                                <span class="card-title">Цели</span>
                                <a href="#" class="card-link" data-tab="goals">Все</a>
                            </div>
                            <div class="goals-mini" id="goalsMini"></div>
                        </div>
                        
                        <!-- Долги -->
                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="file-text"></i></div>
                                <span class="card-title">Долги</span>
                            </div>
                            <div class="debts-summary" id="debtsSummary">
                                <div class="debt-item">
                                    <span>Кредиты</span>
                                    <span id="creditsDebt">0 ₽</span>
                                </div>
                                <div class="debt-item">
                                    <span>Ипотека</span>
                                    <span id="mortgageDebt">0 ₽</span>
                                </div>
                                <div class="debt-item">
                                    <span>Кредитные карты</span>
                                    <span id="cardsDebt">0 ₽</span>
                                </div>
                                <div class="debt-item total">
                                    <span>Всего</span>
                                    <span id="totalDebt">0 ₽</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Инвестиции -->
                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="trending-up"></i></div>
                                <span class="card-title">Инвестиции</span>
                                <a href="#" class="card-link" data-tab="investments">Все</a>
                            </div>
                            <div class="investments-mini" id="investmentsMini">
                                <div class="investment-summary">
                                    <div class="investment-value" id="investmentValue">0 ₽</div>
                                    <div class="investment-profit" id="investmentProfit">+0 ₽ (0%)</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Последние операции -->
                        <div class="card card-wide">
                            <div class="card-header">
                                <div class="card-icon"><i data-lucide="receipt"></i></div>
                                <span class="card-title">Последние операции</span>
                                <a href="#" class="card-link" data-tab="transactions">Все</a>
                            </div>
                            <div class="transactions-mini" id="transactionsMini"></div>
                        </div>
                    </div>
                </section>

                <!-- Остальные секции остаются без изменений структуры -->
                <!-- ... -->
                
            </div>
        </main>

        <!-- Mobile Navigation -->
        <nav class="mobile-nav">
            <a href="#" class="mobile-nav-item active" data-tab="dashboard">
                <span class="nav-icon"><i data-lucide="layout-dashboard"></i></span>
                <span class="nav-text">Обзор</span>
            </a>
            <a href="#" class="mobile-nav-item" data-tab="transactions">
                <span class="nav-icon"><i data-lucide="receipt"></i></span>
                <span class="nav-text">Операции</span>
            </a>
            <a href="#" class="mobile-nav-item" data-tab="accounts">
                <span class="nav-icon"><i data-lucide="wallet"></i></span>
                <span class="nav-text">Счета</span>
            </a>
            <a href="#" class="mobile-nav-item" data-tab="goals">
                <span class="nav-icon"><i data-lucide="target"></i></span>
                <span class="nav-text">Цели</span>
            </a>
            <a href="#" class="mobile-nav-item" data-tab="analytics">
                <span class="nav-icon"><i data-lucide="bar-chart-3"></i></span>
                <span class="nav-text">Статистика</span>
            </a>
        </nav>

        <!-- FAB -->
        <button class="fab" id="fab">
            <i data-lucide="plus"></i>
        </button>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Заголовок</h2>
                <button class="modal-close" id="modalClose">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/components.js"></script>
    <script src="js/app.js"></script>
    
    <script>
        // Инициализация Lucide иконок
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</body>
</html>